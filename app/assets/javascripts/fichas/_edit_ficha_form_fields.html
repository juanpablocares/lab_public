<script type="text/ng-template" id="medicosTemplate.html">
  <a>
  		<strong ng-bind-html="match.model.rut+'-'+match.model.rutdv | typeaheadHighlight:query"></strong> - 
  		<span ng-bind-html="match.model.nombre+' '+match.model.apellido_paterno+' '+match.model.apellido_materno | typeaheadHighlight:query">
  		</span>
  </a>
</script>


<div ng-init="!ficha_edit?ficha_edit=ficha:ficha=ficha"> </div>
<table class="table table-condensed">
	<tbody>
		<tr ng-if="ficha.id">	
			<td class="col-sm-2"><strong>N° Ficha
			</strong></td>
			<td class="col-sm-2">
				{{ficha.id}}
			</td>
			<td class="col-sm-2"><strong>Recepcionista</strong></td>
			<td class="col-sm-2">
				{{ficha.user.nombre}} {{ficha.user.apellido_paterno}}
			</td>
			<td class="col-sm-2">
				<strong>Fecha</strong>
			</td>
			<td class="col-sm-2">
				{{ficha.creado | date:'dd/MM/yyyy'}} 
			</td>
			
		</tr>
		<tr>
			<td><strong>Procedencia</strong></td>
			<td colspan="3">
			    <input type="text" ng-model="procedencia.selected" typeahead="item.nombre for item in procedenciasArray | filter:$viewValue | limitTo:10" class="form-control">
			</td>
			<td>
				<strong>
					Folio Proc.
				</strong>
			</td>
			<td><input class="form-control" type="text" ng-model="ficha_edit.numero_procedencia"></td>
		</tr>
		<tr>
			<td><strong>Restringido</strong></td>
			<td>
			<input class="form-control" type="checkbox" ng-change="ficha_edit.receptor = ''" ng-checked="ficha_edit.receptor" ng-model="ficha_edit.restringido">
			</td>
			<td><strong>Entregar a</strong></td>
			<td>
			<input class="form-control" type="text" ng-model="ficha_edit.receptor" ng-disabled="!ficha_edit.restringido">
			</td>
			<td><strong>Email</strong></td>
			<td>
				<input class="form-control" type="checkbox" ng-model="ficha_edit.mandar_email">
			</td>
		</tr>
		<tr>
			<td><strong>Programa</strong></td>
			<td>
			<input class="form-control" placeholder="Ingrese programa" type="text" ng-model="ficha_edit.programa" required>
			</td>
			<td><strong>N°</strong></td>
			<td>
			<input class="form-control" placeholder="Ingrese número" type="number" ng-model="ficha_edit.numero_programa" required>
			</td>
			<td><strong>Urgente</strong></td>
			<td>
				<input class="form-control" type="checkbox" ng-model="ficha_edit.urgente">
			</td>
		</tr>
		<tr>
			<td><strong>Médico</strong></td>
			<td colspan="4">
				<input type="text" ng-model="medico.selected" typeahead="medico as medico.nombre+' '+ medico.apellido_paterno+' '+medico.apellido_materno for medico in medicosArray | medicoFilter:$viewValue | limitTo: 10" typeahead-template-url="medicosTemplate.html" class="form-control">
			</td>
			<td>
				<button ng-click="borrarMedico()">
					<i class="fa fa-close text-danger"></i>
				</button>
			</td>
		</tr>
		<tr>
		<td><strong>Observaciones</strong></td>
			<td colspan="5">
			<input ng-model="ficha_edit.observaciones" class="form-control">
			</input>
			</td>
		</tr>
	</tbody>
</table>